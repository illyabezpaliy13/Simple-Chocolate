{"mappings":"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","sources":["src/js/buy-now.js"],"sourcesContent":["(() => {\r\n  const refs = {\r\n    openModalBtn: document.querySelectorAll('[data-open-buy]'),\r\n    closeModalBtn: document.querySelector('[data-close-buy]'),\r\n    backdrop2: document.querySelector('[data-backdrop-buy]'),\r\n  };\r\n  refs.closeModalBtn.addEventListener('click', toggleModal1);\r\n\r\n  function toggleModal1() {\r\n    refs.backdrop2.classList.toggle('is-hidden-buy');\r\n  }\r\n  refs.openModalBtn.forEach(elem =>\r\n    elem.addEventListener('click', toggleModal1)\r\n  );\r\n})();\r\n\r\nfunction validation(form) {\r\n  function removeError(input) {\r\n    const parent = input.parentNode;\r\n\r\n    if (parent.classList.contains('error')) {\r\n      parent.querySelector('.error-label').remove();\r\n      parent.classList.remove('error');\r\n    }\r\n  }\r\n\r\n  function createError(input, text) {\r\n    const parent = input.parentNode;\r\n    const errorLabel = document.createElement('label');\r\n\r\n    errorLabel.classList.add('error-label');\r\n    errorLabel.textContent = text;\r\n\r\n    parent.classList.add('error');\r\n\r\n    parent.append(errorLabel);\r\n  }\r\n\r\n  let result = true;\r\n\r\n  const allInputs = form.querySelectorAll('input');\r\n\r\n  for (const input of allInputs) {\r\n    removeError(input);\r\n\r\n    if (input.dataset.minLength) {\r\n      if (input.value.length < input.dataset.minLength) {\r\n        removeError(input);\r\n        createError(input, `Min. length: ${input.dataset.minLength}`);\r\n        result = false;\r\n      }\r\n    }\r\n\r\n    if (input.dataset.maxLength) {\r\n      if (input.value.length > input.dataset.maxLength) {\r\n        removeError(input);\r\n        createError(input, `Max. length: ${input.dataset.maxLength}`);\r\n        result = false;\r\n      }\r\n    }\r\n\r\n    if (input.dataset.required == 'true') {\r\n      if (input.value == '') {\r\n        removeError(input);\r\n        createError(input, 'Поле не заполнено!');\r\n        result = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nconst refsDiscount = {\r\n  openModalBtn: document.querySelector('[data-open-discount]'),\r\n  closeModalBtn: document.querySelector('[data-close-discount]'),\r\n  backdrop4: document.querySelector('[data-backdrop-discount]'),\r\n  discountContainer: document.querySelector('.discount-container'),\r\n};\r\n\r\nfunction toggleModal() {\r\n  refsDiscount.backdrop4.classList.toggle('is-hidden-discount');\r\n}\r\n\r\ndocument\r\n  .getElementById('form_buy-now')\r\n  .addEventListener('submit', function (event) {\r\n    event.preventDefault();\r\n\r\n    if (validation(this) === true) {\r\n      const TOKEN = '6590186759:AAEXDgJPNN-mXGJ5L18tzDES9dWLPunj-qo';\r\n      const CHAT_ID = '-1001917308774';\r\n      const URI_API = `https://api.telegram.org/bot${TOKEN}/sendMessage`;\r\n      const success = document.getElementById('success');\r\n\r\n      refsDiscount.openModalBtn.addEventListener('click', toggleModal);\r\n      refsDiscount.closeModalBtn.addEventListener('click', toggleModal);\r\n\r\n      document\r\n        .getElementById('form_buy-now')\r\n        .addEventListener('submit', function (e) {\r\n          e.preventDefault();\r\n\r\n          let message = `<b>Simply Chocolate Form</b>\\n`;\r\n          message += `<b>Name: </b> <i>${this.name.value}</i> \\n`;\r\n          message += `<b>Surname: </b> <i>${this.surname.value}</i> \\n`;\r\n          message += `<b>Email: </b> ${this.email.value} \\n`;\r\n          message += `<b>Phone: </b> ${this.phonenum.value} \\n`;\r\n          message += `<b>Card: </b> ${this.cardnum.value} \\n`;\r\n          message += `<b>Comment: </b> ${this.comment.value}`;\r\n\r\n          axios\r\n            .post(URI_API, {\r\n              chat_id: CHAT_ID,\r\n              parse_mode: 'html',\r\n              text: message,\r\n            })\r\n            .then(res => {\r\n              this.name.value = '';\r\n              this.surname.value = '';\r\n              this.email.value = '';\r\n              this.phonenum.value = '';\r\n              this.cardnum.value = '';\r\n              this.comment.value = '';\r\n              success.style.display = 'block';\r\n              success.innerHTML = 'Message Send';\r\n            })\r\n            .catch(err => {\r\n              console.warn(err);\r\n            })\r\n            .finally(() => {\r\n              console.log('The end');\r\n              refsDiscount.openModalBtn.removeEventListener(\r\n                'click',\r\n                toggleModal\r\n              );\r\n              document\r\n                .querySelector('[data-backdrop-buy]')\r\n                .classList.toggle('is-hidden-buy');\r\n            });\r\n        });\r\n    }\r\n  });"],"names":["refs","openModalBtn","document","querySelectorAll","closeModalBtn","querySelector","backdrop2","toggleModal1","classList","toggle","addEventListener","forEach","elem","$5841c9197f87e075$var$refsDiscount","backdrop4","discountContainer","$5841c9197f87e075$var$toggleModal","getElementById","event","preventDefault","form","removeError","input","parent","parentNode","contains","remove","createError","text","errorLabel","createElement","add","textContent","append","result","allInputs","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","input1","value","dataset","minLength","length","concat","maxLength","required","err","return","$5841c9197f87e075$var$validation","this","URI_API","success","e","message","name","surname","email","phonenum","cardnum","comment","axios","post","chat_id","parse_mode","then","res","_this","style","display","innerHTML","catch","console","warn","finally","log","removeEventListener"],"version":3,"file":"index.96311184.js.map"}